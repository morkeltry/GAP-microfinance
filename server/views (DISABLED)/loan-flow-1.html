<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Global Abundance Project</title>
		<meta name="description" content="">
		<meta name="author" content="">
		<link href="./css/bootstrap.min.css" rel="stylesheet">
		<link href="./css/style.css" rel="stylesheet">
		<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	</head>
	<body>
		<div class="container-fluid">
			<div class="row clearfix pt-10">
				<div class="container bg-yellow" id="wrapper-content">
					<div class="row clearfix">
						<div class="col-md-8 col-md-offset-2 text-center logo">
							<img src="./img/logo.png" class="center-block img-responsive">
						</div>                    
					</div>
					<div class="row clearfix">
						<div class="col-md-12 text-center">
							<div class="box">
								<h3 class="text-warning font-green">Repayments Due:</h3>
								<p>&nbsp;</p>                            
								<div class="table-reponsive">
									<table class="table table-striped" id="showData"></table>
									<table class="table table-striped">
										<thead>
											<tr>
												<th>Project</th>
												<th>Location</th>
												<th>Token Loaned</th>   
												<th>Details</th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<td>Abimbola</td>
												<td>Jos, Plateau</td>
												<td>5,000</td>
												<td><a href="#">details</a></td>
											</tr>
											<tr>
												<td>Abimbola</td>
												<td>Jos, Plateau</td>
												<td>5,000</td>
												<td><a href="#">details</a></td>
											</tr>
											<tr>
												<td>Abimbola</td>
												<td>Jos, Plateau</td>
												<td>5,000</td>
												<td><a href="#">details</a></td>
											</tr>
											<tr>
												<td>Abimbola</td>
												<td>Jos, Plateau</td>
												<td>5,000</td>
												<td><a href="#">details</a></td>
											</tr>                                        
										</tbody>
										<tfoot>
											<tr>
												<td colspan="4">
													<button class="btn btn-success  pull-right">Refresh</button>
												</td>
											</tr>
										</tfoot>                                    
									</table>
								</div>
								
							</div>
							<hr>
						</div>                    
						<div class="col-md-12 text-center">
							<h3 class="text-info">Repayments Instuctions:</h3>
							<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
							<h2>send to</h2>
							<h3 class="font-green">0xa609653c58c36e5fb905627fad46dd28b112504b</h3>                        
						</div>
					</div>
				</div>
			</div>
			<script>
			$.ajax({
				url: '/retrieve',
					complete: function(data) {
					var myBooks = JSON.parse(data.responseText);				
					var col = [];
					for (var i = 0; i < myBooks.length; i++) {
						for (var key in myBooks[i]) {
							if (col.indexOf(key) === -1) {
								col.push(key);
							}
						}
					}

					// CREATE DYNAMIC TABLE.
					var table = document.createElement("table");

					// CREATE HTML TABLE HEADER ROW USING THE EXTRACTED HEADERS ABOVE.

					var tr = table.insertRow(-1);                   // TABLE ROW.

					for (var i = 0; i < col.length; i++) {
						var th = document.createElement("th");      // TABLE HEADER.
						th.innerHTML = col[i];
						tr.appendChild(th);
					}

					// ADD JSON DATA TO THE TABLE AS ROWS.
					for (var i = 0; i < myBooks.length; i++) {

						tr = table.insertRow(-1);

						for (var j = 0; j < col.length; j++) {
							var tabCell = tr.insertCell(-1);
							tabCell.innerHTML = myBooks[i][col[j]];
						}
					}

					// FINALLY ADD THE NEWLY CREATED TABLE WITH JSON DATA TO A CONTAINER.
					var divContainer = document.getElementById("showData");
					divContainer.innerHTML = "";
					divContainer.appendChild(table);
				}
			});
			</script>
			<script src="js/bootstrap.min.js"></script>
			<script src="js/scripts.js"></script>
	</body>

	</html>