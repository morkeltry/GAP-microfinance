doctype html
html(lang='en')
  head
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible', content='IE=edge')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    title Step-1
    meta(name='description', content='Source code generated using layoutit.com')
    meta(name='author', content='LayoutIt!')
    link(href='css/bootstrap.min.css', rel='stylesheet')
    link(href='css/style.css', rel='stylesheet')
    script(src='https://code.jquery.com/jquery-3.3.1.min.js')
  body
    .container-fluid
      .row.clearfix
        #wrapper-content.container.onbording
          .row.clearfix
            .col-md-8.col-md-offset-2.text-center.logo
              img.center-block.img-responsive(src='./img/logo.png')
            .col-md-12.text-center
              h3.font-green GAP mocrofinance explanation
              p
                strong.font-red To begin
                | , you need to install Metamask, and get an Ethereum account and register with ID box
    script(src='https://cdn.jsdelivr.net/gh/ethereum/web3.js/dist/web3.min.js')
    script(src='js/bootstrap.min.js')
    script(src='js/scripts.js')
    script.
      window.addEventListener('load', function() {
      // Load WEB3
      // Check wether it's already injected by something else (like Metamask or Parity Chrome plugin)
      if(typeof web3 !== 'undefined') {
      web3 = new Web3(web3.currentProvider);
      // Or connect to a node
      } else {
      web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
      }
      // Check the connection
      if(!web3.isConnected()) {
      console.error("Not connected");
      }
      var account = web3.eth.accounts[0];
      var accountInterval = setInterval(function() {
      if (web3.eth.accounts[0] !== account)
      {
      account = web3.eth.accounts[0];
      if(account)
      {
      web3.version.getNetwork((err, netId) => {
      if(netId == 1)
      {
      window.location = 'http://localhost:3000/signup';
      }
      else
      {
      window.location = 'http://localhost:3000';
      }
      })
      }
      else
      {
      //window.location = 'http://localhost:3000';
      }
      }
      }, 100);
      });
      web3.eth.getAccounts(function(err, accounts){
      if (accounts.length > 0) window.location = 'http://localhost:3000/signup';
      });
